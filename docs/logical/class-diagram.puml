@startuml Diagramme de classes global

skinparam package {
    BackgroundColor #F9F9F9
    BorderColor #333
    FontColor #333
}
skinparam class {
    BackgroundColor #EFEFEF
    BorderColor #666
    FontColor #222
    ArrowColor #888
}
skinparam note {
    BackgroundColor #FFFBEA
    BorderColor #E1C16E
}

title <b><size:18>Diagramme de classes - Frontend & Microservices</size></b>

package "frontend" #ADD8E6 {
    class CartView
    class ProductView
    class StoreView
    class LoginView
    CartView ..> ShoppingCart
    ProductView ..> Product
    StoreView ..> Store
    LoginView ..> Customer
}

package "auth" #FFDAB9 {
    class Customer {
        + id: number
        + name: string
        + email: string
        + password: string
        + cart_id: number
    }
    class Manager {
        + id: number
        + name: string
        + email: string
        + password: string
        + store_id: number
    }
    Customer "1" -- "1" ShoppingCart : "cart_id"
    Manager "1" -- "1" Store : "store_id"
}

package "products" #90EE90 {
    class Product {
        + id: number
        + name: string
        + price: number
        + category: Category
    }
    class Category {
        + id: number
        + name: string
    }
    Category "1" -- "0..*" Product : "products"
}

package "inventory" #FFB6C1 {
    class InventoryProduct {
        + id: number
        + store_id: number
        + product_id: number
        + stock: number
    }
    class SupplyRequest {
        + id: number
        + store_id: number
        + quantity: number
    }
    InventoryProduct "1" -- "1" Store : "store_id"
    InventoryProduct "1" -- "1" Product : "product_id"
    SupplyRequest "1" -- "1" InventoryProduct : "product"
    SupplyRequest "1" -- "1" Store : "store_id"
}

package "sales" #E6E6FA {
    class Sale {
        + id: number
        + store_id: number
        + date: string
    }
    class SaleItem {
        + sale_id: number
        + product_id: number
        + quantity: number
        + price: number
    }
    class ShoppingCart {
        + id: number
        + customer_id: number
    }
    class ShoppingCartProduct {
        + id: number
        + product_id: number
        + quantity: number
    }
    class Checkout {
        + id: number
        + customer_id: number
        + store_id: number
        + total_amount: number
        + payment_method: string
    }
    Sale "1" -- "0..*" SaleItem : "items"
    Sale "1" -- "1" Store : "store_id"
    SaleItem "1" -- "1" Product : "product_id"
    ShoppingCart "1" -- "0..*" ShoppingCartProduct : "products"
    ShoppingCart "1" -- "1" Customer : "customer_id"
    ShoppingCartProduct "1" -- "1" Product : "product_id"
    Checkout "1" -- "1" Customer : "customer_id"
    Checkout "1" -- "1" Store : "store_id"
}

package "store" #FFFACD {
    class Store {
        + id: number
        + name: string
        + isMain: boolean
    }
}

note top of frontend
    <b>Frontend</b> : Vue utilisateur
end note

note top of auth
    <b>Auth</b> : Gestion des utilisateurs et managers
end note

note top of products
    <b>Products</b> : Catalogue produits et catégories
end note

note top of inventory
    <b>Inventory</b> : Stock et demandes d’approvisionnement
end note

note top of sales
    <b>Sales</b> : Panier, ventes et paiements
end note

note top of store
    <b>Store</b> : Magasins physiques
end note

@enduml