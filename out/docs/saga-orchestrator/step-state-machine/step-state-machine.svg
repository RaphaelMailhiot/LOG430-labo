<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="654px" preserveAspectRatio="none" style="width:538px;height:654px;" version="1.1" viewBox="0 0 538 654" width="538px" zoomAndPan="magnify"><defs><filter height="300%" id="fqyo4qibz6xvk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="343" x="90" y="18.6855">Saga Orchestrator - Machine d'état (Étape)</text><rect fill="#FEFECE" filter="url(#fqyo4qibz6xvk)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="70" x="90.5" y="136.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="95.5" y="161.8691">PENDING</text><rect fill="#FEFECE" filter="url(#fqyo4qibz6xvk)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="108" x="71.5" y="263.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="76.5" y="289.3691">IN_PROGRESS</text><rect fill="#FEFECE" filter="url(#fqyo4qibz6xvk)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="96" x="21.5" y="381.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="26.5" y="407.3691">COMPLETED</text><rect fill="#FEFECE" filter="url(#fqyo4qibz6xvk)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="58" x="162.5" y="451.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="167.5" y="477.3691">FAILED</text><rect fill="#FEFECE" filter="url(#fqyo4qibz6xvk)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="115" x="7" y="521.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="12" y="547.3691">COMPENSATED</text><ellipse cx="125.5" cy="38.6406" fill="#000000" filter="url(#fqyo4qibz6xvk)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><ellipse cx="127.5" cy="632.6406" fill="none" filter="url(#fqyo4qibz6xvk)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="128" cy="633.1406" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><path d="M196,126.6406 L196,152.1406 L160.68,156.1406 L196,160.1406 L196,185.6953 A0,0 0 0 0 196,185.6953 L529,185.6953 A0,0 0 0 0 529,185.6953 L529,136.6406 L519,126.6406 L196,126.6406 A0,0 0 0 0 196,126.6406 " fill="#FBFB77" filter="url(#fqyo4qibz6xvk)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M519,126.6406 L519,136.6406 L529,136.6406 L519,126.6406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="202" y="145.1357">Chaque étape possède retry_count/max_retries,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="202" y="161.4873">mais la logique de retry n'est pas encore implémentée</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="202" y="177.8389">au niveau de l'orchestrateur.</text><!--MD5=[9674832c83223e87d1fcf6baeaa37530]
link *start to PENDING--><path d="M125.5,48.7006 C125.5,66.1806 125.5,105.0706 125.5,130.6906 " fill="none" id="*start-to-PENDING" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="125.5,135.9406,129.5,126.9406,125.5,130.9406,121.5,126.9406,125.5,135.9406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="126.5" y="93.1357">création d'étape</text><!--MD5=[1de3a617a7d10a4d8809703924147983]
link PENDING to IN_PROGRESS--><path d="M125.5,176.2006 C125.5,198.1306 125.5,234.1906 125.5,258.1806 " fill="none" id="PENDING-to-IN_PROGRESS" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="125.5,263.4006,129.5,254.4006,125.5,258.4006,121.5,254.4006,125.5,263.4006" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="126.5" y="230.1357">executeStep()</text><!--MD5=[60cc424a5837e466fbbffb1b1a6af178]
link IN_PROGRESS to COMPLETED--><path d="M111.32,304.0406 C105.32,312.8006 98.56,323.4506 93.5,333.6406 C86.7,347.3206 80.88,363.4006 76.67,376.3906 " fill="none" id="IN_PROGRESS-to-COMPLETED" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="75.08,381.3806,81.6351,374.03,76.6054,376.619,74.0165,371.5894,75.08,381.3806" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="94.5" y="348.1357">succès</text><!--MD5=[eca7966b8786487531927302ed0d7b2a]
link IN_PROGRESS to FAILED--><path d="M132.31,303.8406 C144.45,338.0406 169.77,409.4006 183.01,446.7206 " fill="none" id="IN_PROGRESS-to-FAILED" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="184.72,451.5406,185.4826,441.7213,183.0492,446.8281,177.9425,444.3946,184.72,451.5406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="150.5" y="348.1357">erreur</text><!--MD5=[142e1324322a8d3da264a9ed9eb9abee]
link FAILED to *end--><path d="M183.78,491.8206 C170.63,524.4806 144.23,590.0806 132.88,618.2706 " fill="none" id="FAILED-to-*end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="130.95,623.0806,138.0064,616.2099,132.807,618.4382,130.5786,613.2388,130.95,623.0806" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2358bc2808d1b13e8c5c9735ade80cec]
link COMPLETED to COMPENSATED--><path d="M52.76,421.7506 C46.35,430.2906 39.79,440.8506 36.5,451.6406 C31.31,468.6406 31.94,474.4606 36.5,491.6406 C38.83,500.4206 43.15,509.2706 47.71,516.9906 " fill="none" id="COMPLETED-to-COMPENSATED" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="50.56,521.6406,49.2735,511.8762,47.9499,517.376,42.45,516.0524,50.56,521.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="37.5" y="477.1357">compensateStep()</text><!--MD5=[7a38c8409a279d36ba11cd577248d482]
link COMPENSATED to *end--><path d="M78.17,561.9506 C90.63,579.5606 108.65,605.0106 119.11,619.7806 " fill="none" id="COMPENSATED-to-*end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="122.1,624.0106,120.1526,614.3562,119.206,619.9333,113.6289,618.9867,122.1,624.0106" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b8235cc4b8662b4c4e71c7a539db40db]
@startuml
title Saga Orchestrator - Machine d'état (Étape)
hide empty description

state "PENDING" as PENDING
state "IN_PROGRESS" as IN_PROGRESS
state "COMPLETED" as COMPLETED
state "FAILED" as FAILED
state "COMPENSATED" as COMPENSATED

[*] - -> PENDING : création d'étape
PENDING - -> IN_PROGRESS : executeStep()
IN_PROGRESS - -> COMPLETED : succès
IN_PROGRESS - -> FAILED : erreur
FAILED - -> [*]
COMPLETED - -> COMPENSATED : compensateStep()
COMPENSATED - -> [*]

note right of PENDING
Chaque étape possède retry_count/max_retries,
mais la logique de retry n'est pas encore implémentée
au niveau de l'orchestrateur.
end note

@enduml

PlantUML version 1.2021.00(Sun Jan 10 05:25:05 EST 2021)
(MIT source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: CA
--></g></svg>